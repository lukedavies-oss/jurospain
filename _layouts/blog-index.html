---
layout: default
---
{% assign limit = page.posts_limit | default: site.paginate | default: 9 | plus: 0 %}
{% assign offset = page.posts_offset | default: 0 | plus: 0 %}
{% assign total_posts = site.posts | size %}
{% assign total_pages = total_posts | times: 1.0 | divided_by: limit | ceil %}
{% assign current_page = offset | divided_by: limit | plus: 1 %}
{% assign base = page.pagination_base | default: '/blog/' %}
{% assign next_offset = offset | plus: limit %}
{% assign prev_offset = offset | minus: limit %}
{% assign next_page_number = next_offset | divided_by: limit | plus: 1 %}
{% assign prev_page_number = prev_offset | divided_by: limit | plus: 1 %}
<section class="section-pad">
  <div class="container container--narrow">
    <div class="blog-index-header">
      <h1 class="section-title">{{ page.title | default: 'Insights for living in Spain' }}</h1>
      {% if page.description %}<p class="section-subtitle">{{ page.description }}</p>{% endif %}
    </div>
    <div class="post-grid">
      {% for post in site.posts limit: limit offset: offset %}
      <article class="post-card">
        <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
        <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: '%d %B %Y' }}</time>
        <p>{{ post.description }}</p>
        <a class="btn btn-ghost" href="{{ post.url | relative_url }}">Read guide</a>
      </article>
      {% endfor %}
    </div>
    {% if total_pages > 1 %}
    <nav class="pagination" aria-label="Pagination">
      {% if prev_offset >= 0 %}
        {% if prev_offset == 0 %}
        <a class="prev" href="{{ base | relative_url }}" aria-label="Previous page">←</a>
        {% else %}
        <a class="prev" href="{{ base | append: 'page/' | append: prev_page_number | append: '/' | relative_url }}" aria-label="Previous page">←</a>
        {% endif %}
      {% endif %}
      <span class="active" aria-current="page">{{ current_page }}</span>
      {% if next_offset < total_posts %}
      <a class="next" href="{{ base | append: 'page/' | append: next_page_number | append: '/' | relative_url }}" aria-label="Next page">→</a>
      {% endif %}
    </nav>
    {% endif %}
  </div>
</section>
